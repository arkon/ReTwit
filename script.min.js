function injectCSS(){if(document.body){document.removeEventListener("DOMSubtreeModified",injectCSS,!1);var a=document.createElement("style");chrome.storage.sync.get(["barcolor","iconcolor","corners","width2","width3","fade","shadow","roundavatars","previews","labels","flip","sidebar","miniprofile","miniprofilenormal","miniprofilewide","wtf","trends","footer","font"],function(b){b.barcolor&&(a.innerHTML+=".global-nav,.global-nav-inner,#header{background:"+b.barcolor+"!important;}"),b.iconcolor&&(a.innerHTML+=".nav li .Icon{color:"+b.iconcolor+";}",a.innerHTML+=".Icon--tweet{color:#fff!important;}"),b.corners&&(a.innerHTML+="*{border-radius:0!important;-webkit-border-radius:0!important;}"),b.width2&&(a.innerHTML+=".wrapper,.wrapper-narrow,.wrapper-permalink,.global-nav .container{width:"+b.width2+"px!important}",a.innerHTML+=".content-main,.profile-page-header,.profile-page-header .profile-header-inner-overlay{width:"+(b.width2-300)+"px!important}"),b.width3&&(a.innerHTML+=".three-col .wrapper,.three-col .wrapper-narrow,.three-col .wrapper-permalink,.three-col .global-nav .container{width:"+b.width3+"px!important}",a.innerHTML+=".three-col .content-main,.three-col .profile-page-header,.three-col .profile-page-header .profile-header-inner-overlay{width:"+(b.width3-600)+"px!important}"),b.fade&&(a.innerHTML+=".dashboard .module{opacity:"+b.fade/100+";}"),b.miniprofilewide&&(a.innerHTML+=".mini-profile{opacity:1!important;}"),b.roundavatars&&(a.innerHTML+=".avatar,.ProfileTweet-avatar{border:1px solid #fff;box-shadow:0 0 0 1px #eee;margin-top:-2px;margin-left:-2px;}",a.innerHTML+=".avatar,.profile-card.profile-header .profile-picture,.current-user img,.ProfileTweet-avatar,.ProfileAvatar-image,.ProfileAvatar-placeholderImage,.ProfileAvatar,.ProfileCard-avatarImage,.ProfileCard-avatarLink,.DashboardProfileCard-avatarLink,.DashboardProfileCard-avatarImage,.ProfilePopupContainer--bellbird .ProfileHeader .profile-picture{-webkit-border-radius:100%!important;border-radius:100%!important;}"),b.previews&&(a.innerHTML+=".with-media-forward .cards-base .media-forward{max-height:0!important;}",a.innerHTML+=".expanded-conversation .with-media-forward .cards-base .media-forward{max-height:none!important;}"),b.labels&&(a.innerHTML+=".tweet-actions .with-icn b{font-size:0!important;line-height:10px!important;}"),b.flip&&(a.innerHTML+="body:not(.three-col) .dashboard{float:left!important;}",a.innerHTML+=".module .list-link .Icon--caretRight{-webkit-transform:none!important;float:right!important;margin-right:0!important;}",a.innerHTML+=".content-main,.profile-card.profile-header{margin-left:10px!important;}"),(b.sidebar||b.wtf&&b.trends&&b.footer&&(b.miniprofile||b.miniprofilewide))&&(!b.sidebar&&b.miniprofilewide?(a.innerHTML+=".wtf-module,.trends,.Footer{display:none!important;}",a.innerHTML+=".wrapper-home .content-main,.wrapper-settings .content-main,.wrapper-home .dashboard,.wrapper-settings .dashboard{margin-top:30px!important;}"):(a.innerHTML+=".wrapper-home .dashboard{display:none!important;}",a.innerHTML+=".content-main,.dashboard{margin-top:0!important;}"),a.innerHTML+=".wrapper-home .content-main,.wrapper-home .profile-page-header,.wrapper-home .profile-page-header .profile-header-inner-overlay{width:"+b.width2+"px!important}",a.innerHTML+=".three-col .wrapper-home .content-main,.three-col .wrapper-home .profile-page-header,.three-col .wrapper-home .profile-page-header .profile-header-inner-overlay{width:"+b.width3+"px!important}"),b.miniprofile&&(a.innerHTML+=".mini-profile{display:none!important;}"),b.miniprofilewide&&!b.sidebar&&(a.innerHTML+=".mini-profile{position:absolute;top:57px;left:23px;width:calc(100% - 46px);background:transparent;z-index:999;}",a.innerHTML+=".wrapper-home .content-main,.wrapper-settings .content-main,.wrapper-home .dashboard,.wrapper-settings .dashboard{margin-top:63px;}",a.innerHTML+=".profile-summary,.js-mini-profile-stats-container,.home-tweet-box{display:inline-block;vertical-align:middle;z-index:0;}",a.innerHTML+=".profile-summary{display:flex;width:calc(100% - 290px);float:left;height:52px!important;}",a.innerHTML+=".enhanced-mini-profile .mini-profile .profile-summary .profile-header-inner-overlay{height:52px!important;top:0!important;}",a.innerHTML+=".module .tweet-content{width:266px!important;}",a.innerHTML+=".enhanced-mini-profile .mini-profile-stats-container{position:absolute!important;right:0!important;width:220px;}",a.innerHTML+=".dashboard .stats{border:0!important;}",a.innerHTML+=".mini-profile .account-summary .account-group{padding-left:15px;}",a.innerHTML+=".enhanced-mini-profile .mini-profile .profile-summary img.avatar{margin-top:-1px;}",a.innerHTML+=".enhanced-mini-profile .mini-profile .profile-summary{padding:0!important;text-align:left!important;overflow:visible!important;background-size:calc(100% - 220px);}",a.innerHTML+=".enhanced-mini-profile .mini-profile .profile-summary .fullname,.enhanced-mini-profile .mini-profile .profile-summary .screen-name{display:inline!important;vertical-align:middle;position:relative;}",a.innerHTML+=".enhanced-mini-profile .mini-profile .profile-summary .fullname{top:-25px;margin-left:10px;}",a.innerHTML+=".enhanced-mini-profile .mini-profile .profile-summary .screen-name{top:-22px;margin-left:10px;}"),b.wtf&&(a.innerHTML+=".wtf-module{display:none!important;}"),b.trends&&(a.innerHTML+=".trends{display:none!important;}"),b.footer&&(a.innerHTML+=".Footer{display:none!important;}"),b.shadow||(a.innerHTML+=".profile-header-inner-overlay{display:none!important;}"),b.font&&(b.font.indexOf("Twitter default")>-1||(b.font.indexOf("ReTwit default")>-1?a.innerHTML+='*{font-family:"Segoe UI","Helvetica Neue",Helvetica-Neue,Helvetica,Arial,sans-serif!important;}':($("head").append('<link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family='+b.font+'">'),a.innerHTML+="*{font-family:"+b.font+"!important;}")))}),document.head.appendChild(a)}}document.addEventListener("DOMSubtreeModified",injectCSS,!1),$(window).load(function(){function a(a){a.hasClass("imgur")||a.hasClass("instagram")||(text=a.find(".js-tweet-text").text(),text&&(link=a.find("[data-expanded-url]").attr("data-expanded-url"),-1!==text.indexOf("i.imgur.com")?(a.find(".expanded-content").prepend('<div class="CardAttribution"><img width="20" height="20" class="CardAttribution-avatar" src="https://pbs.twimg.com/profile_images/3723926625/e935032b01220d25946cde66dc317a1b_normal.png" alt=""><strong class="AttributionName">imgur</strong></div><div><a target="_blank" href="'+link+'"><img src="'+link+'" alt="Embedded image permalink" width="100%"></a><div class="CardFooter"><div class="byline"><a target="_blank" href="'+link+'">View on web</a></div></div></div>'),a.addClass("imgur")):-1!==text.indexOf("instagram.com/p/")&&(a.find(".expanded-content").prepend('<div class="CardAttribution"><strong>Instagram</strong></div><div><a target="_blank" href="'+link+'"><img src="'+link+'media/?size=l" alt="Embedded image permalink" width="100%"></a><div class="CardFooter"><div class="byline"><a target="_blank" href="'+link+'">View on web</a></div></div></div>'),a.addClass("instagram"))))}function c(){b||(b=!0,$(".tweet").each(function(){$(this).hasClass("quote")||($(this).find(".action-rt-container").after('<li class="action-quote-container"><a role="button" class="with-icn"><span class="icon sm-quote"></span><b>Quote</b></a></li>'),$(this).addClass("quote"))}),$(".action-quote-container").click(function(){$("#global-new-tweet-button").click();var a=$(this).parent().parent().parent();$(".modal-tweet-form-container #tweet-box-global").html('"@'+a.find(".username b").html()+": "+a.find(".js-tweet-text").html()+'"')}),b=!1)}$(".js-signout-button").before('<li><a href="'+chrome.extension.getURL("options.html")+'" target="_blank">ReTwit Options</a></li>'),$(document).on("click",".stream-item",function(){a($(this))}),$(".permalink .permalink-tweet").each(function(){a($(this))}),$(document).ready(c),setInterval(c,4e3);var b=!1});